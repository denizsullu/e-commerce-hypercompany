<div class="bg-gray-100 h-screen py-8">
  <div class="container mx-auto px-4">
    <h1 class="text-2xl font-semibold mb-4">Alışveriş sepeti</h1>
    <div class="flex flex-col md:flex-row gap-4">
      <div class="md:w-3/4">
        <div class="bg-white rounded-lg shadow-md p-6 mb-4">
            <mat-stepper orientation="vertical">
                <mat-step>
                    <ng-template matStepLabel>Sepetteki Ürünler</ng-template>
                    <ng-template matStepContent>
                        <div class="max-h-[500px] overflow-auto">
                            <table class="w-full">
                                <thead>
                                <tr>
                                    <th class="text-left font-semibold">Ürün</th>
                                    <th class="text-left font-semibold">Fiyat</th>
                                    <th class="text-left font-semibold">Adet</th>
                                    <th class="text-left font-semibold">Toplam</th>
                                </tr>
                                </thead>
                                <tbody>
                                    @for(product of cartItems;track product.productId){
                                        <tr>
                                            <td class="py-4">
                                                <div class="flex items-center">
                                                    <img class="h-16 w-16 mr-4" [src]="product.productImage" alt="Product image">
                                                    <span class="font-semibold">{{product.productName}}</span>
                                                </div>
                                            </td>
                                            <td class="py-4">{{product.productPrice | turkishLira}}</td>
                                            <td class="py-4">
                                                <div class="flex items-center">
                                                    <button (click)="decreaseQuantity(product.productId,product.userId)"
                                                        class="border rounded-md py-2 px-4 mr-2">-</button>
                                                    <span class="text-center w-8">{{product.productQuantity}}</span>
                                                    <button (click)="increaseQuantity(product.productId,product.userId)"
                                                        class="border rounded-md py-2 px-4 ml-2">+</button>
                                                </div>
                                            </td>
                                            <td class="py-4">{{product.productPrice * product.productQuantity | turkishLira}}</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <button mat-button matStepperNext >İleri</button>
                    </ng-template>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Adres Seçimi</ng-template>
                    <ng-template matStepContent>
                        <div class="max-w-4xl mb-3 py-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                @for(address of addresses;track address.id){
                                    <div>
                                        <div class="bg-white shadow-md rounded-lg p-4 cursor-pointer hover:bg-blue-100"
                                             [ngClass]="{'bg-blue-200': selectedAddressId === address.id}"
                                             (click)="selectAddress(address.id)">
                                            <h3 class="text-md font-semibold text-gray-800">{{address.id}}</h3>
                                            <p class="text-sm text-gray-600">{{address.publicAddress}}</p>
                                        </div>
                                    </div>
                                }
                                <div class="flex items-center justify-center bg-white shadow-md rounded-lg p-4 cursor-pointer hover:bg-blue-100">
                                    <button type="button" class="text-blue-600 hover:text-blue-800 font-semibold">Yeni Adres Ekle</button>
                                </div>

                            </div>
                        </div>

                        <button mat-button matStepperPrevious>Geri</button>
                        <button mat-button matStepperNext>İleri</button>
                    </ng-template>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>Kart Seçimi</ng-template>
                    <div class="max-w-4xl py-4">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4">Kredi Kartı Seçimi</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            @for (card of creditCards;track card.id){
                                <div [ngClass]="{'bg-blue-200': selectedCardId === card.id, 'hover:bg-blue-100': selectedCardId !== card.id}"
                                     class="bg-white shadow-md rounded-lg p-4 cursor-pointer"
                                     (click)="selectCard(card.id)">
                                    <h3 class="text-md font-semibold text-gray-800">{{ card.cardHolderName }}</h3>
                                    <p class="text-sm text-gray-600">{{ card.cardNumber }}</p>
                                    <p class="text-sm text-gray-600">Son Kullanma Tarihi: {{ card.expiryDate }}</p>
                                </div>
                            }
                            <!-- Yeni Kart Ekleme Kartı -->
                            <div class="flex items-center justify-center bg-white shadow-md rounded-lg p-4 cursor-pointer hover:bg-blue-100">
                                <button type="button" class="text-blue-600 hover:text-blue-800 font-semibold">Yeni Kart Ekle</button>
                            </div>
                        </div>
                    </div>

                    <button mat-button matStepperPrevious>Geri</button>
                </mat-step>
            </mat-stepper>


        </div>
      </div>
      <div class="md:w-1/4">
        <div class="bg-white rounded-lg shadow-md p-6">
          <h2 class="text-lg font-semibold mb-4">Summary</h2>
          <div class="flex justify-between mb-2">
            <span>Subtotal</span>
            <span>$19.99</span>
          </div>
          <div class="flex justify-between mb-2">
            <span>Taxes</span>
            <span>$1.99</span>
          </div>
          <div class="flex justify-between mb-2">
            <span>Shipping</span>
            <span>$0.00</span>
          </div>
          <hr class="my-2">
          <div class="flex justify-between mb-2">
            <span class="font-semibold">Total</span>
            <span class="font-semibold">$21.98</span>
          </div>
          <button class="bg-blue-500 text-white py-2 px-4 rounded-lg mt-4 w-full">Checkout</button>
        </div>
      </div>
    </div>
  </div>
</div>
